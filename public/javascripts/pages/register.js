import{formattingDateTime as a,getDateTimeV2 as b,getFromLocalStorage as c,idGenerator as d,saveToLocalStorage as e}from"../modules/utils.js";const f=document.getElementById("first-name-input"),g=document.getElementById("last-name-input"),h=document.getElementById("username-input"),i=document.getElementById("email-input"),j=document.getElementById("password-input"),k=document.getElementById("confirm-password-input"),l=document.getElementById("accept-terms-checkbox"),m=document.getElementById("register-btn");function n(o){const p={email:/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/,name:/^[a-zA-Z]{3,24}$/,username:/^[a-zA-Z]\w{2,15}$/,password:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@\(!\)%*?&])[A-Za-z\d@\(!\)%*?&]{8,24}$/},q=o.name&&o.family&&o.email&&o.username&&o.password&&o.confirmPassword;return l.checked?q?p.name.test(o.name)?p.name.test(o.family)?p.username.test(o.username)?p.email.test(o.email)?p.password.test(o.password)?o.password===o.confirmPassword||!swal({title:"Password and confirm password must be the same!",icon:"warning"}):(swal({title:"password must contain at least 8 charactors",text:"must have lower case, upper case, number and special charactor",icon:"warning"}),!1):(swal({title:"please enter valid email",icon:"warning"}),!1):(swal({title:"please enter valid username",icon:"warning"}),!1):(swal({title:"please enter valid name (last name)",icon:"warning"}),!1):(swal({title:"please enter valid name (first name)",icon:"warning"}),!1):(swal({title:"Please enter all fields",icon:"warning"}),!1):(swal({title:"Please accept terms",icon:"warning"}),!1)}function r(){const s={id:d(),name:f.value.trim(),family:g.value.trim(),username:h.value.trim(),email:i.value.trim(),password:j.value.trim(),confirmPassword:k.value.trim(),phone:"",position:"",createdAt:a(b()).dateTimeISO,profile:"",todos:[],notifications:[]};n(s)&&(delete s.confirmPassword,t(s))}function t(u){const v=c("DB"),w=v.users.find(x=>x.id===u.id);w||(v.users.push(u),e("DB",v)&&(location.href="./login.html"))}m.addEventListener("click",r);