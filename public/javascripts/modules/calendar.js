import{hideTransparentOverlay as e,showTransparentOverlay as n}from"./shared.js";import{convertMonthToMonthName as t,getDateTime as a,normalizeDateTime as r}from"./utils.js";let dateTime=a(),currentMonth=dateTime.month,currentDay=dateTime.day,currentYear=dateTime.year,numberOfDaysOnMonth=calcNumberOfDaysOnMonth(),fisrtDayOfMonthOnWeek=calcFisrtDayOfMonthOnWeek();function calcNumberOfDaysOnMonth(){let e={1:31,2:currentYear%4==0?29:28,3:31,4:30,5:31,6:30,7:31,8:31,9:30,10:31,11:30,12:31};return e[currentMonth]}function nextMonth(){currentMonth<12?currentMonth++:(currentMonth=1,currentYear++),fisrtDayOfMonthOnWeek=calcFisrtDayOfMonthOnWeek(),numberOfDaysOnMonth=calcNumberOfDaysOnMonth(),insertDaysOnCalendar(),insertMonthYearOnCalendar(),updateDateOnCalendarInput()}let nextMonthBtn=document.getElementById("next-month-btn");function previousMonth(){currentMonth>1?currentMonth--:(currentMonth=12,currentYear>1&&currentYear--),fisrtDayOfMonthOnWeek=calcFisrtDayOfMonthOnWeek(),numberOfDaysOnMonth=calcNumberOfDaysOnMonth(),insertDaysOnCalendar(),insertMonthYearOnCalendar(),updateDateOnCalendarInput()}function insertMonthYearOnCalendar(){document.getElementById("calendar__month-year").innerHTML=`${t(currentMonth)} ${currentYear}`}function calcFisrtDayOfMonthOnWeek(){let e=r(`${currentYear}-${currentMonth}-1`).weekday;return(e=(e+1)%7)>0?e:7}function normalizeDateForInput(){let e=String(currentMonth).padStart(2,0),n=String(currentDay).padStart(2,0);return`${currentYear}-${e}-${n}`}function updateDateOnCalendarInput(){document.getElementById("calendar__input-date").value=normalizeDateForInput()}function generateCalendarDays(){let e=[];for(let n=1;n<fisrtDayOfMonthOnWeek;n++)e.push("<td></td>");for(let t=1;t<=numberOfDaysOnMonth;t++)e.push(`<td class="${currentDay===t?"calendar__day--active":"calendar__day"}">${t}</td>`);return e}function generateCalendarWeeks(e){let n=e.length,t="",a="";for(let r=1;r<=n;r++)a+=e[r-1],r%7==0&&(t+=`<tr class="grid grid-cols-7 gap-x-2 md:gap-x-5">${a}</tr>`,a="");return a&&(t+=`<tr class="grid grid-cols-7 gap-x-2 md:gap-x-5">${a}</tr>`),t}function insertDaysOnCalendar(){let e=document.getElementById("calendar__tbody"),n=generateCalendarDays();e.innerHTML=generateCalendarWeeks(n)}function updateCalendar(e){let n=r(e.target.value);currentYear=n.year,currentMonth=n.month,currentDay=n.day,fisrtDayOfMonthOnWeek=calcFisrtDayOfMonthOnWeek(),insertDaysOnCalendar(),insertMonthYearOnCalendar()}function showCalendar(){n(),document.getElementById("calendar").classList.remove("opacity-0","invisible")}function hideCalendar(){e(),document.getElementById("calendar").classList.add("opacity-0","invisible")}nextMonthBtn.addEventListener("click",nextMonth),document.getElementById("previous-month-btn").addEventListener("click",previousMonth),window.addEventListener("load",()=>{insertDaysOnCalendar(),insertMonthYearOnCalendar(),updateDateOnCalendarInput()}),document.getElementById("calendar__input-date").addEventListener("change",updateCalendar),document.getElementById("calendar__tbody").addEventListener("click",e=>{"calendar__day"===e.target.className&&(currentDay=Number(e.target.textContent),insertDaysOnCalendar(),updateDateOnCalendarInput())}),document.getElementById("calendar__hide-btn").addEventListener("click",hideCalendar);export{showCalendar,hideCalendar};